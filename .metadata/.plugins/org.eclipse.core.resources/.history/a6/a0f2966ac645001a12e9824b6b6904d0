import java.awt.image.BufferedImage;
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Base64;

import javax.imageio.ImageIO;

public class AddressAPI {
	public static void main(String[] args) {
		imageDownload();
	}

	public static byte[] imageDownload() {
		String clientId = "rk42k1c8hn "; // clientId
		String clientSecret = "1geFmLjYzfIorQEuzxH0WNhrM6zLhDdQgvjeLxfn "; // clientSecret
		byte[] ex = new byte[1024];
		ByteArrayInputStream ba = null;

		try {
			String apiURL = "https://naveropenapi.apigw.ntruss.com/map-static/v2/raster?w=300&h=300&markers=type:d|size:small|pos:127.1054221%2037.3591614&format=jpg";
			URL url = new URL(apiURL);
			HttpURLConnection con = (HttpURLConnection) url.openConnection();
			con.setRequestMethod("GET");
			con.setRequestProperty("X-NCP-APIGW-API-KEY-ID", clientId);
			con.setRequestProperty("X-NCP-APIGW-API-KEY", clientSecret);
			int responseCode = con.getResponseCode();

			BufferedReader br;
			if (responseCode == 200) {
				ba = (ByteArrayInputStream) con.getInputStream();
			} else {
				br = new BufferedReader(new InputStreamReader(con.getErrorStream()));
			}
			System.out.println(ba);


		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public void fileDelete(String fileName) {
		File f = new File(fileName);
		f.delete();
	}

	public void byteArrayConvertToImageFile(byte[] imageByte) throws Exception {
		BufferedImage bufferedImage = new ImageIO.read(new ByteArrayInputStream(imageByte));

		ImageIO.write(bufferedImage, "png", new File("/var/opt/image.png")); // 저장하고자 하는 파일 경로를 입력합니다.
	}

}
