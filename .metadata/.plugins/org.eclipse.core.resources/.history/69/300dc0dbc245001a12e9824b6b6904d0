import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class AddressAPI extends JFrame {
	
	public static void main(String[] args) {
		AddressAPI api = new AddressAPI();
		String location = "A";
		api.imageDownload(location);
		JLabel googleMap = new JLabel(api.getMap(location));
		api.fileDelete(location);

	}

	public void imageDownload(String location) {
		String clientId = "rk42k1c8hn "; // clientId
		String clientSecret = "1geFmLjYzfIorQEuzxH0WNhrM6zLhDdQgvjeLxfn "; // clientSecret
		byte[] ex = new byte[2048];

		try {
			String apiURL = "https://naveropenapi.apigw.ntruss.com/map-static/v2/raster?w=300&h=300&markers=type:d|size:small|pos:127.1054221%2037.3591614";
			URL url = new URL(apiURL);
			HttpURLConnection con = (HttpURLConnection) url.openConnection();
			con.setRequestMethod("GET");
			con.setRequestProperty("X-NCP-APIGW-API-KEY-ID", clientId);
			con.setRequestProperty("X-NCP-APIGW-API-KEY", clientSecret);
			int responseCode = con.getResponseCode();

			InputStream is;
			OutputStream os = new FileOutputStream("");
			if (responseCode == 200) {
				is = con.getInputStream();
			} else {
				is = con.getErrorStream();
			}
			int input;
			while ((input = is.read(ex)) != -1) {
				os.write(ex, 0, input);
			}
			is.close();
			os.close();

		} catch (Exception e) {
			System.out.println(e);
		}
	}

	public ImageIcon getMap(String location) {
		return new ImageIcon(
				new ImageIcon(location).getImage().getScaledInstance(300, 300, java.awt.Image.SCALE_SMOOTH));
	}

	public void fileDelete(String fileName) {
		File f = new File(fileName);
		f.delete();
	}

}
